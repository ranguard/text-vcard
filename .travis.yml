language: perl
perl:
  - "5.18"
  - "5.16"
  - "5.14"
  - "5.12"
  - "5.10"

before_install:
    cpanm -n Devel::Cover::Report::Coveralls

install:
   - cpanm --quiet --notest --skip-satisfied Dist::Zilla
   - cpanm Test::NoTabs
   - "dzil authordeps | grep -vP '[^\\w:]' | cpanm --verbose --notest --skip-satisfied"
   - "dzil listdeps   | grep -vP '[^\\w:]' | cpanm --verbose --skip-satisfied"

script:
    - dzil smoke --release --author && cover -test -report coveralls

notifications:
  email:
    recipients:
      - llap@cpan.org
    on_success: change
    on_failure: always
